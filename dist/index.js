'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.parseCookies=parseCookies;exports.setCookie=setCookie;exports.destroyCookie=destroyCookie;var _cookie=require('cookie');var _cookie2=_interopRequireDefault(_cookie);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function parseCookies(){var ctx=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(ctx.req&&ctx.req.headers.cookie){return _cookie2.default.parse(ctx.req.headers.cookie,options)}if(process.browser){return _cookie2.default.parse(document.cookie,options)}return{}}/* global document */function setCookie(){var ctx=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var name=arguments[1];var value=arguments[2];var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(ctx&&ctx.res){var cookies=ctx.res.getHeader('Set-Cookie')||[];if(typeof cookies==='string'){cookies=[cookies]}cookies.push(_cookie2.default.serialize(name,value,options));ctx.res.setHeader('Set-Cookie',cookies)}if(process.browser){document.cookie=_cookie2.default.serialize(name,value,options)}return{}}function destroyCookie(){var ctx=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var name=arguments[1];var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(ctx&&ctx.res){var cookies=ctx.res.getHeader('set-cookie')||[];if(typeof cookies==='string'){cookies=[cookies]}cookies.push(_cookie2.default.serialize(name,'',Object.assign(options,{maxAge:-1})));ctx.res.setHeader('Set-Cookie',cookies)}if(process.browser){document.cookie=_cookie2.default.serialize(name,'',Object.assign(options,{maxAge:-1}))}return{}}exports.default={set:function set(ctx,name,value){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};setCookie(ctx,name,value,options)},get:function get(ctx,options){return parseCookies(ctx,options)},destroy:function destroy(ctx,name){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return destroyCookie(ctx,name,options)}};